# ğŸ“„ PDF FÃ¡cil â€” Web App + API

**PDF FÃ¡cil** Ã© uma ferramenta gratuita e aberta que permite **unir, comprimir e organizar PDFs e imagens (JPG/PNG)** diretamente no navegador â€” sem instalar nada.  
Tudo Ã© feito **em memÃ³ria**, com total privacidade: os arquivos expiram automaticamente apÃ³s alguns minutos.

---

## ğŸŒ Acesse agora

- ğŸ”— **App Web:** [https://romanbrocki.github.io/PDF_Facil_API/](https://romanbrocki.github.io/PDF_Facil_API/)  
- âš™ï¸ **Backend (API):** [https://pdf-facil.onrender.com](https://pdf-facil.onrender.com)

---

## ğŸ§© Arquitetura

O sistema Ã© dividido em duas partes independentes:

| Camada | Hospedagem | FunÃ§Ã£o |
|---------|-------------|--------|
| **Frontend** (`index.html`) | GitHub Pages | Interface em HTML + JavaScript puro. Envia os arquivos e baixa o PDF final. |
| **Backend** (`api/`) | Render | API em FastAPI responsÃ¡vel por compressÃ£o, merge e geraÃ§Ã£o do PDF. |

---

## âš™ï¸ Estrutura do repositÃ³rio

```
PDF_Facil_API/
â”œâ”€ api/
â”‚  â”œâ”€ main.py          # Endpoints principais (preview, estimate, process, download)
â”‚  â”œâ”€ storage.py       # SessÃµes temporÃ¡rias em RAM com TTL
â”‚  â”œâ”€ thumbs.py        # Miniaturas de PDFs e imagens
â”‚  â”œâ”€ schemas.py       # Modelos de entrada/saÃ­da (Pydantic)
â”‚  â””â”€ jobs.py          # PDFs finais armazenados atÃ© o download (one-time)
â”œâ”€ engine/
â”‚  â”œâ”€ engine_config.py # Presets de compressÃ£o (none|min|med|max)
â”‚  â””â”€ pdf_ops.py       # Motor principal de compressÃ£o, merge e estimativas
â”œâ”€ index.html          # Interface web
â”œâ”€ requirements.txt    # DependÃªncias Python
â”œâ”€ runtime.txt         # VersÃ£o Python (Render usa python-3.11.9)
â””â”€ README_API.md / README_ENGINE.md  # DocumentaÃ§Ã£o modular
```

---

## ğŸš€ Fluxo completo

```text
1. UsuÃ¡rio envia arquivos â†’ /preview
2. API gera miniaturas e devolve token
3. UsuÃ¡rio define ordem, rotaÃ§Ã£o e compressÃ£o
4. App envia â†’ /estimate (opcional)
5. API estima tamanho e mostra reduÃ§Ã£o
6. App envia â†’ /process
7. API gera PDF e retorna link temporÃ¡rio
8. UsuÃ¡rio baixa â†’ /download/one-time/{job_id}
```

- O **token** identifica a sessÃ£o temporÃ¡ria.  
- O **job_id** identifica o PDF final (vÃ¡lido apenas atÃ© o download).

---

## ğŸ“¦ NÃ­veis de compressÃ£o

| NÃ­vel | Modo | Efeito | Uso indicado |
|-------|-------|--------|---------------|
| **none** | â€” | sem compressÃ£o | preservar qualidade mÃ¡xima |
| **min** | smart | rasteriza sÃ³ pÃ¡ginas imagem-only | documentos leves |
| **med** | all | rasteriza todas as pÃ¡ginas (DPI 150, JPEG 70) | PDFs pesados |
| **max** | all | rasteriza tudo (DPI 110, JPEG 50) | reduzir ao mÃ­nimo possÃ­vel |

Guard-rails garantem que **nunca se aumente o tamanho**:  
se o resultado for maior que o original, o backend mantÃ©m o arquivo original.

---

## ğŸ’» ExecuÃ§Ã£o local

1ï¸âƒ£ **Instalar dependÃªncias**
```bash
pip install -r requirements.txt
```

2ï¸âƒ£ **Rodar localmente**
```bash
uvicorn api.main:app --reload --port 8765
```

3ï¸âƒ£ **Abrir a interface**
```text
http://127.0.0.1:5500/index.html?api=http://127.0.0.1:8765
```
*(basta rodar tambÃ©m um `python -m http.server 5500` na pasta raiz)*

4ï¸âƒ£ **Testar endpoints**
Acesse [http://127.0.0.1:8765/docs](http://127.0.0.1:8765/docs)

---

## ğŸ”§ VariÃ¡veis de ambiente (Render)

| VariÃ¡vel | DescriÃ§Ã£o | PadrÃ£o |
|-----------|------------|--------|
| `FILE_MAX_MB` | Tamanho mÃ¡ximo por arquivo | 50 |
| `BATCH_MAX_MB` | Limite total por upload | 75 |
| `TTL_MINUTES` | Tempo de vida das sessÃµes | 15 |
| `CORS_ALLOW_ORIGINS` | DomÃ­nios permitidos | `*` |

Exemplo:
```env
FILE_MAX_MB=50
BATCH_MAX_MB=75
TTL_MINUTES=15
CORS_ALLOW_ORIGINS=https://romanbrocki.github.io,https://romanbrocki.github.io/PDF_Facil_API/
```

---

## ğŸ§  Tecnologias utilizadas

| Tipo | Biblioteca |
|------|-------------|
| Backend | FastAPI, Uvicorn |
| PDFs e imagens | PyMuPDF, Pillow, img2pdf, pypdf |
| Frontend | HTML + JavaScript |
| Hospedagem | Render + GitHub Pages |

---

## ğŸ”’ Privacidade

- Nenhum arquivo Ã© salvo no servidor.  
- Tudo Ã© mantido apenas **em memÃ³ria RAM**.  
- O link de download Ã© **vÃ¡lido uma Ãºnica vez**.  
- SessÃµes e arquivos expiram apÃ³s `TTL_MINUTES` (padrÃ£o: 15).

---

## ğŸ§© DocumentaÃ§Ãµes complementares

- [README_API.md](api/README_API.md) â€” Detalhes tÃ©cnicos da API  
- [README_ENGINE.md](engine/README_ENGINE.md) â€” LÃ³gica interna e compressÃ£o  
- [index.html](index.html) â€” Frontend pronto para deploy  

---

## ğŸ‘¨â€ğŸ’» Autor

Desenvolvido por **Roman Brocki**  
Backend em Python â€¢ Frontend em HTML/JS  
Hospedagem gratuita no **Render** e **GitHub Pages**

---

## ğŸ“œ LicenÃ§as

Este projeto utiliza bibliotecas open source sob licenÃ§as permissivas.

- **PyMuPDF (AGPL-3.0)** â€” Â© Artifex Software, Inc.  
  Uso permitido em software aberto; este projeto mantÃ©m cÃ³digo-fonte pÃºblico conforme a AGPL.  
- **Demais bibliotecas** (FastAPI, Pillow, Pydantic, Uvicorn etc.) â€” MIT/BSD/Apache-2.0, livres para uso interno e comercial.

O cÃ³digo-fonte completo estÃ¡ disponÃ­vel em  
â¡ï¸ [https://github.com/RomanBrocki/PDF_Facil_API](https://github.com/RomanBrocki/PDF_Facil_API)

---

## ğŸ§¾ VersÃµes e compatibilidade

| Componente | VersÃ£o mÃ­nima |
|-------------|----------------|
| Python | 3.11.9 |
| Pillow | 10+ |
| PyMuPDF | 1.24+ |
| FastAPI | 0.110+ |
| Uvicorn | 0.29+ |

---

**PDF FÃ¡cil â€” simples, rÃ¡pido e seguro.**
